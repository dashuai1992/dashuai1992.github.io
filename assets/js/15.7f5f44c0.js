(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{340:function(s,a,t){"use strict";t.r(a);var r=t(4),n=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"k8s基础概念学习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#k8s基础概念学习"}},[s._v("#")]),s._v(" K8S基础概念学习")]),s._v(" "),a("p",[s._v("学习k8s时的笔记，相对比较简单的操作笔记。")]),s._v(" "),a("h2",{attrs:{id:"命令式创建应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令式创建应用"}},[s._v("#")]),s._v(" 命令式创建应用")]),s._v(" "),a("h3",{attrs:{id:"使用kubectl-run-创建应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用kubectl-run-创建应用"}},[s._v("#")]),s._v(" 使用"),a("code",[s._v("kubectl run")]),s._v(" 创建应用")]),s._v(" "),a("ul",[a("li",[s._v("语法:")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("kubectl run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key=value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("replicas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("dry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("bool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("overrides"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("inline"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COMMAND")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("例：")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master01 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# kubectl run nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("deploy "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("latest "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\npod"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("deploy created\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master01 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# kubectl "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" pods "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o wide\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAME")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("READY")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STATUS")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RESTARTS")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AGE")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("READINESS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GATES")]),s._v("\nnginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("deploy   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          44s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("   node2   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("这是一个pod ip，仅仅可以在集群内部访问，如下：")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master01 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# curl "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("I")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("Server")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.21")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Thu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GMT")]),s._v("\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Length"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("612")]),s._v("\nLast"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Modified"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Tue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GMT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("Connection")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" keep"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alive\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ETag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"60aced88-264"')]),s._v("\nAccept"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Ranges"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" bytes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("删除：")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master01 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# kubectl "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" pods nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("deploy\npod "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deploy"')]),s._v(" deleted\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"yaml创建应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yaml创建应用"}},[s._v("#")]),s._v(" YAML创建应用")]),s._v(" "),a("ul",[a("li",[s._v("以nginx为例，创建deploy"),a("br"),s._v("\n文件 "),a("code",[s._v("nginx-deploy.yaml")])])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" apps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Deployment\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("deploy\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("replicas")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("selector")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("matchLabels")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("template")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("labels")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("containers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("latest\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" containerPort"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[a("code",[s._v("可以使用 kubectl explain Deployment.sepc 查看对应配置")]),s._v("\n创建svc对外暴露服务，"),a("code",[s._v("nginx-svc.yaml")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Service\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("svc\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("namespace")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("selector")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" NodePort\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("targetPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("nodePort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30080")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[a("code",[s._v("Service.spec.type: NodePort")]),s._v(" 通过每个Node上的IP和静态端口（NodePort）暴露服务。NodePort 服务会路由到 ClusterIP服务，这个 ClusterIP 服务会自动创建。通过请求 "),a("NodeIP",[s._v(":"),a("NodePort",[s._v("，可以从集群的外部访问一个NodePort服务。")])],1)],1),s._v(" "),a("h3",{attrs:{id:"ingress-和-ingresscontroller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ingress-和-ingresscontroller"}},[s._v("#")]),s._v(" ingress 和 ingressController")]),s._v(" "),a("blockquote",[a("p",[s._v("参考资料"),a("br"),s._v("\nhttps://github.com/kubernetes/ingress-nginx"),a("br"),s._v("\nhttps://kubernetes.io/zh/docs/tasks/access-application-cluster/ingress-minikube/"),a("br"),s._v("\nhttps://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.46.0/deploy/static/provider/cloud/deploy.yaml")])]),s._v(" "),a("p",[a("code",[s._v("采用 NodePort 方式暴露服务面临问题是，服务一旦多起来，NodePort 在每个节点上开启的端口会及其庞大，而且难以维护。")])]),s._v(" "),a("ul",[a("li",[s._v("搞到deploy.yaml文件")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("kubectl apply "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f deploy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yaml\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" ingress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# kubectl get pod "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n ingress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAME")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("READY")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STATUS")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RESTARTS")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AGE")]),s._v("\ningress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("admission"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("create"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("t692       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Completed")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v("m\ningress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("admission"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("patch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fdxhm        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Completed")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v("m\ningress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("controller"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("898465")]),s._v("b97"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cb6v5   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Running")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v("m\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" ingress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# kubectl get svc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n ingress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAME")]),s._v("                                 "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TYPE")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CLUSTER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXTERNAL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IP")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("PORT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("S")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AGE")]),s._v("\ningress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("controller             "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoadBalancer")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".156")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".191")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("pending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30080")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TCP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30443")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TCP")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v("m\ningress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("controller"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("admission   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClusterIP")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".144")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TCP")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v("m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("部署ingress"),a("br"),s._v("\ningress-myapp.yaml")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("apiVersion"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" extensions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1beta1\nkind"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ingress")]),s._v("\nmetadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" myapp\n  namespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n  annotations"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ingress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v("\nspec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" yds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("k8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n    http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        backend"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n          serviceName"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" myapp\n          servicePort"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" tomcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("k8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n    http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        backend"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n          serviceName"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("svc\n          servicePort"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("curl tomcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("k8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30080")]),s._v("\ncurl yds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("k8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30080")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"安装nfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装nfs"}},[s._v("#")]),s._v(" 安装nfs")]),s._v(" "),a("ul",[a("li",[s._v("各个节点")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("yum install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y nfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utils\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("主节点")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("mkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pv\nvim "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exports")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("systemctl")]),s._v(" enable rpcbind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\nsystemctl enable nfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\nsystemctl start rpcbind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\nsystemctl start nfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\nshowmount "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("node节点")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("mount "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t nfs stor01"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mnt\nmount\numount "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mnt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"nfs使用pv和pvc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nfs使用pv和pvc"}},[s._v("#")]),s._v(" NFS使用PV和PVC")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# mkdir v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nvim "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exports")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("no_root_squash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("no_root_squash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("no_root_squash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v4 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("no_root_squash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("no_root_squash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# exportfs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arv\nexporting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v5\nexporting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v4\nexporting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v3\nexporting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v2\nexporting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# showmount "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" apiVersion"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Export")]),s._v(" list "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" master01"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v4 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ul",[a("li",[s._v("nginx-pv.yaml")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("apiVersion"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" v1\nkind"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PersistentVolume")]),s._v("\nmetadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pv\n  labels"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pv\nspec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  nfs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1\n    server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" master01\n  accessModes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReadWriteMany"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReadWriteOnce"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  capacity"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("Gi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("nginx-pvc.yaml")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("apiVersion"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" v1\nkind"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PersistentVolumeClaim")]),s._v("\nmetadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pvc\n  namespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\nspec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  accessModes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReadWriteMany"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReadWriteOnce"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  resources"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    requests"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("Gi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("nginx-pod.yaml")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("apiVersion"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" v1\nkind"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Pod")]),s._v("\nmetadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" my"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx\n  namespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\nspec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" my"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx\n    image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("latest\n    volumeMounts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" html\n      mountPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html\n  volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" html\n      persistentVolumeClaim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        claimName"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pvc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("测试")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# kubectl get pods "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o wide\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAME")]),s._v("                     "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("READY")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STATUS")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RESTARTS")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AGE")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("READINESS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GATES")]),s._v("\nmy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("nginx                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Running")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v("s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".59")]),s._v("   node2   "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("           "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"welcome to pv1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@master01")]),s._v(" volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# curl "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".59")]),s._v("\nwelcome "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("pv1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);